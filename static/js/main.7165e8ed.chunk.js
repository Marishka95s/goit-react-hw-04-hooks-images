(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{26:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(6),o=n.n(r),s=(n(26),n(8)),u=n(4),i=n(10),l=n.n(i),b=n(20),j=n(11),h=n.n(j);h.a.defaults.baseURL="https://pixabay.com/api/";var f={fetchImages:function(){var e=Object(b.a)(l.a.mark((function e(t){var n,c,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.searchQuery,c=void 0===n?"":n,a=t.currentPage,r=void 0===a?1:a,e.abrupt("return",h.a.get("?q=".concat(c,"&page=").concat(r,"&key=").concat("21847975-d0fb10f6989c918e9c55b7840","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.data.hits})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=n(1);function m(e){var t=e.onChangeQuery,n=Object(c.useState)(""),a=Object(u.a)(n,2),r=a[0],o=a[1];return Object(O.jsx)("header",{className:"Searchbar",children:Object(O.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),0!==r.length&&t(r)},children:[Object(O.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(O.jsx)("span",{className:"SearchForm-button-label",children:" Search"})}),Object(O.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:r,onChange:function(e){o(e.currentTarget.value)}})]})})}var g=function(e){var t=e.children;return Object(O.jsx)("ul",{className:"ImageGallery",children:t})},d=function(e){var t=e.alt,n=e.src,c=e.url,a=e.onClick;return Object(O.jsx)("li",{className:"ImageGalleryItem",children:Object(O.jsx)("img",{onClick:a,src:n,alt:t,className:"ImageGalleryItem-image",url:c})})};function p(e){var t=e.onFetchImages;return Object(c.useEffect)((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[]),Object(O.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})}var v=document.querySelector("#modal-root");function x(e){var t=e.onClose,n=e.src,a=e.alt;Object(c.useEffect)((function(){return window.addEventListener("keydown",o),function(){return window.removeEventListener("keydown",o)}}));var o=function(e){"Escape"===e.code&&t()};return Object(r.createPortal)(Object(O.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(O.jsx)("div",{className:"Modal",children:Object(O.jsx)("img",{src:n,alt:a})})}),v)}var y=n(21),S=n.n(y);n(67);function w(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(1),o=Object(u.a)(r,2),i=o[0],l=o[1],b=Object(c.useState)([]),j=Object(u.a)(b,2),h=j[0],v=j[1],y=Object(c.useState)(""),w=Object(u.a)(y,2),F=w[0],C=w[1],k=Object(c.useState)(!1),I=Object(u.a)(k,2),N=I[0],T=I[1],E=Object(c.useState)(null),L=Object(u.a)(E,2),B=L[0],P=L[1],Q=Object(c.useState)(""),q=Object(u.a)(Q,2),A=(q[0],q[1],Object(c.useState)(!1)),G=Object(u.a)(A,2),R=G[0],U=G[1],z=Object(c.useState)(""),D=Object(u.a)(z,2),J=D[0],M=D[1],_=Object(c.useState)(""),H=Object(u.a)(_,2),K=H[0],V=H[1];Object(c.useEffect)((function(){F&&X()}),[F]);var W=function(){U(!R)},X=function(){var e={searchQuery:F,currentPage:i};T(!0),f.fetchImages(e).then((function(e){a((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e))})),l((function(e){return e+1})),v(Object(s.a)(e)),0===e.length&&P("Nothing was find by your query. Try again.")})).catch((function(e){return P(e.message)})).finally((function(){return T(!1)}))},Y=function(e){M(e.currentTarget.getAttribute("url")),V(e.currentTarget.getAttribute("alt")),W()};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m,{onChangeQuery:function(e){C(e),l(1),a([]),P(null)}}),B&&Object(O.jsxs)("p",{style:{color:"red",textAlign:"center",fontSize:"20px"},children:["This is error: ",B]}),Object(O.jsx)(g,{children:n.map((function(e){var t=e.id,n=e.tags,c=e.webformatURL,a=e.largeImageURL;return Object(O.jsx)(d,{alt:n,src:c,url:a,onClick:Y},t)}))}),N&&Object(O.jsx)(S.a,{type:"Bars",color:"#00BFFF",height:80,width:80}),!(h.length<12)&&!N&&Object(O.jsx)(p,{onFetchImages:X}),R&&Object(O.jsx)(x,{src:J,alt:K,onClose:W})]})}var F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(w,{})}),document.getElementById("root")),F()}},[[68,1,2]]]);
//# sourceMappingURL=main.7165e8ed.chunk.js.map